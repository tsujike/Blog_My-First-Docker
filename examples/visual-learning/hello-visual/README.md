# Hello Visual - Dockerを視覚的に理解する最初の一歩

このサンプルは、**Dockerの基本動作を視覚的に確認する**ための最も簡単な例です。

## このサンプルで学ぶこと

- コンテナが実際に動いていることを確認
- ファイルがどこにあるかを理解
- コンテナの起動・停止を視覚的に確認
- **環境に依存しない**ことを体感する（Mac、Windows、Linuxで同じように動く）
- Dockerの基本動作を体感する

## ファイル構成

```
hello-visual/
├── README.md          # このファイル
├── docker-compose.yml # Docker Composeの設定
├── index.html        # 表示するHTMLファイル
└── Dockerfile        # イメージを作成するためのファイル
```

## 手順

### ステップ1：ファイルを確認する

まず、`index.html`を開いてみましょう。

```bash
# Windowsの場合
notepad index.html

# または、エディタで開く
code index.html
```

**確認ポイント：**
- ファイルがホスト（あなたのPC）上にあることを確認
- ファイルの内容を確認

### ステップ2：コンテナを起動する

```bash
docker-compose up -d
```

**何が起こるか：**
1. Dockerイメージがビルドされる（初回のみ）
2. コンテナが作成される
3. コンテナが起動する
4. nginxサーバーが起動する

**確認コマンド：**
```bash
# コンテナが起動しているか確認
docker ps

# 出力例：
# CONTAINER ID   IMAGE                    COMMAND                  CREATED         STATUS         PORTS                  NAMES
# abc123def456   hello-visual_web:latest  "/docker-entrypoint..."   5 seconds ago   Up 4 seconds   0.0.0.0:8080->80/tcp   hello-visual-web-1
```

### ステップ3：ブラウザで確認する

ブラウザで以下のURLにアクセス：
```
http://localhost:8080
```

**確認ポイント：**
- HTMLページが表示される
- 「Hello Docker!」と表示される
- 現在の時刻が表示される（動的に更新される）

### ステップ4：ファイルを編集してみる

`index.html`を編集してみましょう。

```html
<!-- 変更前 -->
<h1>Hello Docker! 🐳</h1>

<!-- 変更後 -->
<h1>Hello Docker! コンテナが動いています！ 🐳</h1>
```

**確認ポイント：**
- ファイルを保存する
- ブラウザをリロード（F5キー）
- 変更が反映されることを確認

**なぜ変更が反映されるのか？**
- `docker-compose.yml`で、ホストの`index.html`をコンテナにマウントしているため
- ホストのファイルを編集すると、コンテナ内でも変更が反映される

### ステップ5：コンテナの状態を確認する

```bash
# コンテナの詳細情報を確認
docker inspect hello-visual-web-1

# コンテナのログを確認
docker logs hello-visual-web-1

# コンテナ内のファイルを確認
docker exec hello-visual-web-1 ls -la /usr/share/nginx/html
```

### ステップ6：コンテナを停止する

```bash
docker-compose stop
```

**確認ポイント：**
- ブラウザでアクセスできなくなる
- `docker ps`でコンテナが表示されなくなる
- `docker ps -a`で停止中のコンテナが表示される

### ステップ7：コンテナを再開する

```bash
docker-compose start
```

**確認ポイント：**
- ブラウザで再度アクセスできる
- ファイルの変更が残っている

### ステップ8：コンテナを削除する

```bash
docker-compose down
```

**確認ポイント：**
- コンテナが削除される
- `docker ps -a`でコンテナが表示されなくなる
- **ただし、`index.html`ファイルは残る**（ホスト上にあるため）

## 視覚的に確認すべきポイント

### 1. コンテナが動いている

**確認方法：**
- `docker ps`コマンドでコンテナの状態を確認
- ブラウザでアプリにアクセス

**理解すべきこと：**
- コンテナは実際に動いているプロセス
- コンテナが動いていないと、アプリにアクセスできない

### 2. ファイルの場所

**確認方法：**
- `index.html`をエディタで開く
- `docker exec`コマンドでコンテナ内のファイルを確認

**理解すべきこと：**
- ホスト（あなたのPC）上にファイルがある
- コンテナ内にもファイルが見える（マウントされている）
- ホストのファイルを編集すると、コンテナ内でも変更が反映される

### 3. コンテナの独立性

**確認方法：**
- 複数のコンテナを起動してみる
- それぞれが独立して動作することを確認

**理解すべきこと：**
- コンテナは互いに独立している
- 1つのコンテナを停止しても、他のコンテナは影響を受けない

## トラブルシューティング

### ポート8080が既に使用されている

**エラー：**
```
Error: bind: address already in use
```

**対処法：**
`docker-compose.yml`のポート番号を変更：
```yaml
ports:
  - "8081:80"  # 8081番ポートに変更
```

### ファイルの変更が反映されない

**確認事項：**
1. ファイルを保存したか確認
2. ブラウザをリロード（F5キー）
3. コンテナが起動しているか確認（`docker ps`）

### コンテナが起動しない

**確認事項：**
1. Docker Desktopが起動しているか確認
2. ログを確認（`docker-compose logs`）
3. エラーメッセージを確認

## 次のステップ

このサンプルでDockerの基本動作を理解したら、次は以下を試してみましょう：

1. **counter-app/** - データを永続化する例
2. **file-explorer/** - ファイルシステムを理解する例
3. **WordPress環境構築** - より実践的な例

## まとめ

- Dockerコンテナは実際に動いているプロセス
- ファイルはホスト上にあり、コンテナにマウントされる
- コンテナを停止・削除しても、ホストのファイルは残る
- コンテナは互いに独立して動作する

実際に手を動かしながら、Dockerの動作を視覚的に確認することで、理解が深まります！

